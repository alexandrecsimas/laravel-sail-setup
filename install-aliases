#!/usr/bin/env bash

# Lista de aliases a serem configurados (adicione outros aqui se quiser)
declare -A aliases
aliases[sail]="$(pwd)/sail"
aliases[new]="$(pwd)/sail new"
# Exemplo para adicionar um alias para artisan direto:
# aliases[artisan]="$(pwd)/sail artisan"

# Detecta o shell e o arquivo de configura√ß√£o correspondente
current_shell=$(basename "$SHELL")
case "$current_shell" in
    bash) config_file="$HOME/.bashrc" ;;
    zsh)  config_file="$HOME/.zshrc"  ;;
    *)
        echo "‚ùå Shell n√£o suportado: $current_shell"
        exit 1
        ;;
esac

# Garante que o arquivo de configura√ß√£o existe
if [ ! -f "$config_file" ]; then
    echo "‚ö†Ô∏è  Arquivo de configura√ß√£o n√£o encontrado: $config_file"
    echo "üëâ Criando novo arquivo..."
    touch "$config_file"
fi

# Para cada alias, verifica se j√° existe e adiciona se necess√°rio
for name in "${!aliases[@]}"; do
    alias_cmd="alias $name='${aliases[$name]}'"
    if grep -q "$alias_cmd" "$config_file"; then
        echo "‚òëÔ∏è  Alias '$name' j√° est√° configurado em $config_file"
    else
        # Remove qualquer defini√ß√£o antiga do alias
        sed -i "/alias $name=/d" "$config_file"
        # Adiciona o novo alias
        echo -e "\n# Alias para $name (adicionado automaticamente)" >> "$config_file"
        echo "$alias_cmd" >> "$config_file"
        echo "‚úÖ Alias '$name' adicionado ao $config_file"
    fi
done

echo -e "\n‚ÑπÔ∏è  Reinicie o terminal ou execute: source $config_file"
